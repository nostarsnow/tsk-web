"use strict";function utc2local(t){return new Date(t.replace(/t/i," ").replace(/z/i," ").replace(/-/g,"/")).getTime()+288e5}function noXss(t){return new Option(t).innerHTML}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e,n){var r=t.ns||{};r._width=750,r.$html=e("html"),r.$window=e(t),t.click="click";var a="<div/>";r.Date=t.Date,r.getDateTime=function(t){return new r.Date(r.formatDate(t,"yyyy/MM/dd HH:mm:ss")).getTime()},r.formatDate=function(t,e){if(t){switch(e||(e="yyyy-MM-dd HH:mm:ss"),"undefined"==typeof t?"undefined":_typeof(t)){case"string":t=new Date(t.replace(/-/g,"/").replace(/T/," "));break;case"number":t=new Date(t)}if(!(!t instanceof Date)){var n={yyyy:t.getFullYear(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),MM:(""+(t.getMonth()+101)).substr(1),dd:(""+(t.getDate()+100)).substr(1),HH:(""+(t.getHours()+100)).substr(1),mm:(""+(t.getMinutes()+100)).substr(1),ss:(""+(t.getSeconds()+100)).substr(1)};return{str:e.replace(/(yyyy|MM?|dd?|HH?|ss?|mm?)/g,function(){return n[arguments[0]]}),dict:n}}}},r.getDayOffset=function(t,e){var n=+new Date(t.replace(/-/g,"/")),r=+new Date(e.replace(/-/g,"/"));return~~((r-n)/864e5)},r.getPercent=function(t,e){return(t/e*100).toFixed(2)},r.tickToTime=function(t){return 100*(t-11644502393168e4)/1e3/1e3},r.shortDate=function(t){var e=6e4,n=60*e,a=24*n,o=(new Date).getTime(),i=o-r.getDateTime(t);if(i<0)return t;var s=i/a,u=i/n,c=i/e;return s>1?r.formatDate(t):(u>=1?result=parseInt(u)+"小时前":c>=1?result=parseInt(c)+"分钟前":result="刚刚发表",result)},r.tip=function(t,o,i,s){var u=r.tip;return o=o||3e3,i=i||0,s=s||300,u.el!==n&&u.txt!==n||(u.el=e(a).attr("id","ns-tip").appendTo(r.$body),u.txt=e(a).attr("id","ns-tip-txt").appendTo(u.el),u.show=function(t){return clearTimeout(u.setTimeout),u.txt.html(t),u.el.removeAttr("style").fadeIn(i,function(){u.setTimeout=setTimeout(u.hide,o)}),u.el},u.hide=function(t){u.el.fadeOut(t||s,function(){clearTimeout(u.setTimeout)})},u.el.on(click,u.hide.bind(null,50))),u.show(t)},r.ajax=function(t,n,a){var o={type:"get",dataType:"json",timeout:2e4,async:!0,global:!1,load:!0,lock:!0},a=e.extend({},o,a);if(a.data=n||{},a.url=t,a.data.ns_r=1911*Math.random()<<0,a.load&&r.load(),a.lock){if(r.ajaxLock)return{done:function(){},then:function(){}};r.ajaxLock=!0}return e.ajax(a).fail(function(){r.loadHide(),r.ajaxLock=!1,r.tip("网络请求失败！请稍后再试！")}).done(function(t){r.loadHide(),r.ajaxLock=!1})},r.get=function(t,e){return r.ajax(t,e)},r.post=function(t,e){return r.ajax(t,e,{type:"post"})},r.load=function(t){var o=r.load;return t=t||"loading...",o.el===n&&(o.el=e(a).attr("id","ns_loading").appendTo(r.$body),o.icon=e(a).attr("id","ns_loading_i").appendTo(o.el),o.txt=e(a).attr("id","ns_loading_p").appendTo(o.el)),o.txt.html(t),o.el.show()},r.loadHide=function(){return r.load.el===n?e("#ns_loading").hide():r.load.el.hide(),r.load.el},r.getRequest=function(t){var e=location.search,r=new Object;if(e.indexOf("?")!=-1)for(var a=e.substr(1),o=a.split("&"),i=0;i<o.length;i++)r[o[i].split("=")[0]]=unescape(o[i].split("=")[1]);return t!==n?r[t]:r},r.init=function(){r.$body=e(t.document.body)},r.ajaxLock=!1,t.ns=r,e(function(){r.init()})}(window,Zepto),function(t,e){function n(t){return"'"+t.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function r(t){return t.replace(m,"").replace(h,",").replace(w,"").replace(b,"").replace(v,"").split(_)}var a,o={prev:"tpl-",tagOpen:"{{",tagClose:"}}",escape:!0,compress:!0},i=function(t,e,n){a=$.extend({},o,n);var r=new RegExp("^"+a.prev).test(t);return s(t,e,r)},s=function(t,e,n){function r(e){try{return new a(e,t)+""}catch(n){throw n}}n&&(t=u(t));var a=d(t,e);return r.prototype=a.prototype,r.toString=function(){return a.toString()},r(e)},u=i.get=function(t){return document.getElementById(t).innerHTML.replace(/^\s*|\s*$/g,"")},c=function x(t,e){return"string"!=typeof t&&(e="undefined"==typeof t?"undefined":_typeof(t),"number"===e?t+="":t="function"===e?x(t.call(t)):""),t},l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},f=function(t){return c(t).replace(/&(?![\w#]+;)|[<>"']/g,function(t){return l[t]})},p=i.utils={get:i.get,toString:c,escape:f,ns:e,window:t},d=function(t,e){var o="".trim,i=o?["_result='';","_result+=",";","_result"]:["_result=[];","_result.push(",");","_result.join('')"],s=o?"_result+=text;return _result;":"_result.push(text);",u="function(){var text=''.concat.apply('',arguments);"+s+"}",c="'use strict';var _utils=this,toString=_utils.toString,",l=i[0],f="return new String("+i[3]+");",d={_result:1,_data:1,_template:1,_utils:1,$out:1},y=function(t){return a.compress&&(t=t.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),t&&(t=i[1]+n(t)+i[2]+"\n"),t},m=function(t){if(g&&(t=g(t)),0===t.indexOf("=")){var e=a.escape&&!/^=[=#]/.test(t);if(t=t.replace(/^=[=#]?|[\s;]*$/g,""),e){var n=t.replace(/\s*\([^\)]+\)/,"");p[n]||/^(print)$/.test(n)||(t="escape("+t+")")}else t="toString("+t+")";t=i[1]+t+i[2]}return r(t).forEach(function(t){if(t&&!d[t]){var e;e="print"===t?u:p[t]?"_utils."+t:"_data."+t,c+=t+"="+e+",",d[t]=!0}}),t+"\n"};t.split(a.tagOpen).forEach(function(t){t=t.split(a.tagClose),1===t.length?l+=y(t[0]):(l+=m(t[0]),t[1]&&(l+=y(t[1])))});var h=c+l+f;try{var w=new Function("_data","_template",h);return w.prototype=p,w}catch(b){throw b.temp="function anonymous(_data,_template) {"+h+"}",b}},g=function(t){t=t.replace(/^\s*|\s*$/g,"");var e=t.split(" "),n=e.shift(),r=e.join(" ");switch(n){case"if":t="if("+r+"){";break;case"else":e="if"===e.shift()?" if("+e.join(" ")+")":"",t="}else"+e+"{";break;case"/if":t="}";break;case"for":var a=e[0].split(","),o=a[0]||"_value",i=a[1]||"_index",s=e[1]||"in",u=e[2]||"_data",c=o+","+i;"in"!==s&&(u="[]"),t="if (!"+u+"){"+u+"=[]} "+u+".forEach(function("+c+"){";break;case"/for":t="});";break;case"echo":t="print("+r+");";break;default:if(/^\s*\|\s*[\w\$]/.test(r)){var l=!0;0===t.indexOf("#")&&(t=t.substr(1),l=!1);for(var f=0,p=t.split("|"),d=p.length,g=p[f++];f<d;f++)g=filtered(g,p[f]);t=(l?"=":"=#")+g}else t="="+t}return t},y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",m=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,h=/[^\w$]+/g,w=new RegExp(["\\b"+y.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),b=/^\d[^,]*|,\d[^,]*/g,v=/^,+|,+$/g,_=/^$|,+/;e.tpl=i}(window,window.ns);